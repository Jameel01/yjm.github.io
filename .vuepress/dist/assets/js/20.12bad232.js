(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{284:function(s,a,t){"use strict";t.r(a);var e=t(0),n=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"verdaccio-私有npm仓库搭建"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#verdaccio-私有npm仓库搭建","aria-hidden":"true"}},[s._v("#")]),s._v(" "),t("a",{attrs:{href:"https://verdaccio.org/",target:"_blank",rel:"noopener noreferrer"}},[s._v("verdaccio"),t("OutboundLink")],1),s._v(" 私有npm仓库搭建")]),s._v(" "),t("h2",{attrs:{id:"服务器搭建（centos）"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#服务器搭建（centos）","aria-hidden":"true"}},[s._v("#")]),s._v(" 服务器搭建（CentOS）")]),s._v(" "),t("p",[s._v("使用yum安装nodejs")]),s._v(" "),t("ol",[t("li",[s._v("获取最新版bash")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" --silent --location https://rpm.nodesource.com/setup_8.x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n")])])]),t("p",[s._v("其他版本")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("curl")]),s._v(" --silent --location https://rpm.nodesource.com/setup_7.x "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v(" -\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("执行安装")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y nodejs\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("查看版本")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("node -v\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -v\n")])])]),t("h2",{attrs:{id:"安装verdaccio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#安装verdaccio","aria-hidden":"true"}},[s._v("#")]),s._v(" 安装verdaccio")]),s._v(" "),t("p",[s._v("安装")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g verdaccio\n")])])]),t("p",[s._v("启动")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("verdaccio\n")])])]),t("p",[s._v("执行结果如下：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("Verdaccio doesn"),t("span",{pre:!0,attrs:{class:"token string"}},[s._v("'t need superuser privileges. Don'")]),s._v("t run it under root.\n warn --- config "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("file")]),s._v("  - /root/.config/verdaccio/config.yaml\n warn --- Plugin successfully loaded: htpasswd\n warn --- Plugin successfully loaded: audit\n warn --- http address - http://localhost:4873/ - verdaccio/4.2.2\n")])])]),t("h2",{attrs:{id:"配置verdaccio"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置verdaccio","aria-hidden":"true"}},[s._v("#")]),s._v(" 配置verdaccio")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 进入verdaccio目录")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /root/.config/verdaccio/\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看该目录下的文件，该目录下默认有两个文件：config.yaml和storage，添加用户之后会自动创建htpasswd")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" config.yaml  storage\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看配置文件")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vim")]),s._v(" config.yaml\n")])])]),t("p",[s._v("在配置文件config.yaml末尾加入代码：")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# you can specify listen address (or simply a port)")]),s._v("\nlisten: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0:4873\n")])])]),t("h2",{attrs:{id:"使用pm2启动verdaccio，保证进程一直处于打开状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#使用pm2启动verdaccio，保证进程一直处于打开状态","aria-hidden":"true"}},[s._v("#")]),s._v(" 使用pm2启动verdaccio，保证进程一直处于打开状态")]),s._v(" "),t("p",[s._v("安装pm2")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g pm2\n")])])]),t("p",[s._v("使用pm2启动verdaccio")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("pm2 start verdaccio\n")])])]),t("h2",{attrs:{id:"访问私有仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#访问私有仓库","aria-hidden":"true"}},[s._v("#")]),s._v(" 访问私有仓库")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("http://localhost:4873\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or")]),s._v("\nhttp:ip:4873\n")])])]),t("div",{staticClass:"tip custom-block"},[t("p",[s._v("注意：在阿里云服务器添加安全组，开放 4873 端口号，如果没有添加该端口安全组则不能在浏览器正常访问http://ip:4873")]),s._v(" "),t("p",[s._v("ip=>服务器ip地址/域名地址")])]),s._v(" "),t("h2",{attrs:{id:"全局使用私有仓库npm包"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#全局使用私有仓库npm包","aria-hidden":"true"}},[s._v("#")]),s._v(" 全局使用私有仓库npm包")]),s._v(" "),t("ol",[t("li",[s._v("安装npm地址管理插件")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -g nrm\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" -g yrm\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("添加npm地址")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("nrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" ylz http://47.107.67.231:4873\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or")]),s._v("\nyrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("add")]),s._v(" ylz http://47.107.67.231:4873\n")])])]),t("ol",{attrs:{start:"3"}},[t("li",[s._v("查看地址")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("nrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or ")]),s._v("\nyrm "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ls")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 输入内容")]),s._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" -------- https://registry.npmjs.org/\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("yarn")]),s._v(" ------- https://registry.yarnpkg.com/\n  cnpm ------- http://r.cnpmjs.org/\n  taobao ----- https://registry.npm.taobao.org/\n  nj --------- https://registry.nodejitsu.com/\n  npmMirror -- https://skimdb.npmjs.com/registry/\n  edunpm ----- http://registry.enpmjs.org/\n* ylz -------- http://47.107.67.231:4873/\n")])])]),t("ol",{attrs:{start:"4"}},[t("li",[s._v("使用私有仓库地址")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[s._v("nrm use ylz\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# or")]),s._v("\nyrm use ylz\n")])])]),t("h2",{attrs:{id:"临时使用npm私有仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#临时使用npm私有仓库","aria-hidden":"true"}},[s._v("#")]),s._v(" 临时使用npm私有仓库")]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" vue --registry http://47.107.67.231:4873\n")])])]),t("h2",{attrs:{id:"发布npm包到私有仓库"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#发布npm包到私有仓库","aria-hidden":"true"}},[s._v("#")]),s._v(" 发布npm包到私有仓库")]),s._v(" "),t("ol",[t("li",[s._v("登录")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" adduser --registry http://47.107.67.231:4873\n")])])]),t("ol",{attrs:{start:"2"}},[t("li",[s._v("发布")])]),s._v(" "),t("div",{staticClass:"language-sh extra-class"},[t("pre",{pre:!0,attrs:{class:"language-sh"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("npm")]),s._v(" publish --registry http://47.107.67.231:4873\n")])])]),t("h2",{attrs:{id:"私有仓库web界面访问"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#私有仓库web界面访问","aria-hidden":"true"}},[s._v("#")]),s._v(" 私有仓库web界面访问")]),s._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("http://47.107.67.231:4873\n")])])])])}),[],!1,null,null,null);a.default=n.exports}}]);