<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>DOM | 智宇星空</title>
    <meta name="description" content="前端学习资料">
    <link rel="icon" href="favicon.ico">
    
    <link rel="preload" href="/yjm.github.io/assets/css/0.styles.acbb5370.css" as="style"><link rel="preload" href="/yjm.github.io/assets/js/app.16d43aae.js" as="script"><link rel="preload" href="/yjm.github.io/assets/js/2.dc0e93a8.js" as="script"><link rel="preload" href="/yjm.github.io/assets/js/5.4c6ec876.js" as="script"><link rel="prefetch" href="/yjm.github.io/assets/js/10.beb399c5.js"><link rel="prefetch" href="/yjm.github.io/assets/js/11.ca77d212.js"><link rel="prefetch" href="/yjm.github.io/assets/js/12.45689107.js"><link rel="prefetch" href="/yjm.github.io/assets/js/13.aa1b3fbe.js"><link rel="prefetch" href="/yjm.github.io/assets/js/14.8a0e7fde.js"><link rel="prefetch" href="/yjm.github.io/assets/js/15.3633e7a9.js"><link rel="prefetch" href="/yjm.github.io/assets/js/16.b3294066.js"><link rel="prefetch" href="/yjm.github.io/assets/js/17.dc0284b9.js"><link rel="prefetch" href="/yjm.github.io/assets/js/18.cbdb9d59.js"><link rel="prefetch" href="/yjm.github.io/assets/js/19.5251db80.js"><link rel="prefetch" href="/yjm.github.io/assets/js/20.12bad232.js"><link rel="prefetch" href="/yjm.github.io/assets/js/21.09047114.js"><link rel="prefetch" href="/yjm.github.io/assets/js/22.fb0bb1fc.js"><link rel="prefetch" href="/yjm.github.io/assets/js/23.befdb5d2.js"><link rel="prefetch" href="/yjm.github.io/assets/js/24.acbdd388.js"><link rel="prefetch" href="/yjm.github.io/assets/js/25.dd404484.js"><link rel="prefetch" href="/yjm.github.io/assets/js/26.bfe88547.js"><link rel="prefetch" href="/yjm.github.io/assets/js/27.b18b740d.js"><link rel="prefetch" href="/yjm.github.io/assets/js/28.4e88ab0e.js"><link rel="prefetch" href="/yjm.github.io/assets/js/29.e282f883.js"><link rel="prefetch" href="/yjm.github.io/assets/js/3.ba283e77.js"><link rel="prefetch" href="/yjm.github.io/assets/js/30.d6ff8809.js"><link rel="prefetch" href="/yjm.github.io/assets/js/31.2637266c.js"><link rel="prefetch" href="/yjm.github.io/assets/js/32.557aaf69.js"><link rel="prefetch" href="/yjm.github.io/assets/js/33.88f4e582.js"><link rel="prefetch" href="/yjm.github.io/assets/js/34.dae3780d.js"><link rel="prefetch" href="/yjm.github.io/assets/js/35.6b9506b5.js"><link rel="prefetch" href="/yjm.github.io/assets/js/36.858c4d62.js"><link rel="prefetch" href="/yjm.github.io/assets/js/37.f8d863af.js"><link rel="prefetch" href="/yjm.github.io/assets/js/38.a6cd0274.js"><link rel="prefetch" href="/yjm.github.io/assets/js/39.ddf074bc.js"><link rel="prefetch" href="/yjm.github.io/assets/js/4.5942c30c.js"><link rel="prefetch" href="/yjm.github.io/assets/js/40.04216fe1.js"><link rel="prefetch" href="/yjm.github.io/assets/js/41.8ef5b19c.js"><link rel="prefetch" href="/yjm.github.io/assets/js/42.99d6c4a5.js"><link rel="prefetch" href="/yjm.github.io/assets/js/43.6af8c75b.js"><link rel="prefetch" href="/yjm.github.io/assets/js/6.82ba9ee8.js"><link rel="prefetch" href="/yjm.github.io/assets/js/7.d5846097.js"><link rel="prefetch" href="/yjm.github.io/assets/js/8.21d2d8cf.js"><link rel="prefetch" href="/yjm.github.io/assets/js/9.0c75ee61.js">
    <link rel="stylesheet" href="/yjm.github.io/assets/css/0.styles.acbb5370.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/yjm.github.io/" class="home-link router-link-active"><!----> <span class="site-name">智宇星空</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/yjm.github.io/notes/VUE/" class="nav-link">前端笔记</a></div><div class="nav-item"><a href="/yjm.github.io/doc/" class="nav-link">资源导航</a></div><div class="nav-item"><a href="https://github.com/Jameel01" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/yjm.github.io/notes/VUE/" class="nav-link">前端笔记</a></div><div class="nav-item"><a href="/yjm.github.io/doc/" class="nav-link">资源导航</a></div><div class="nav-item"><a href="https://github.com/Jameel01" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/VUE/" class="sidebar-link">vue 开发笔记</a></li><li><a href="/yjm.github.io/notes/VUE/optimize.html" class="sidebar-link">性能优化</a></li><li><a href="/yjm.github.io/notes/VUE/vuecli.html" class="sidebar-link">Vue-CLI</a></li><li><a href="/yjm.github.io/notes/VUE/VUEX/" class="sidebar-link">vuex</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>React</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/REACT/" class="sidebar-link">React 开发笔记</a></li><li><a href="/yjm.github.io/notes/REACT/render.html" class="sidebar-link">React 渲染</a></li><li><a href="/yjm.github.io/notes/REACT/ReactApi.html" class="sidebar-link">React api</a></li><li><a href="/yjm.github.io/notes/REACT/Redux.html" class="sidebar-link">Redux</a></li><li><a href="/yjm.github.io/notes/REACT/Taro.html" class="sidebar-link">taro组件构子</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/JS/" class="sidebar-link">JS笔记</a></li><li><a href="/yjm.github.io/notes/JS/JavaScript-1.html" class="sidebar-link">JavaScript原理</a></li><li><a href="/yjm.github.io/notes/JS/es6.html" class="sidebar-link">ES6 语法</a></li><li><a href="/yjm.github.io/notes/JS/es5.html" class="sidebar-link">ES5</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>TypeScript 常用语法</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/typescript/type.html" class="sidebar-link">基础类型</a></li><li><a href="/yjm.github.io/notes/typescript/declare.html" class="sidebar-link">变量声明</a></li><li><a href="/yjm.github.io/notes/typescript/interface.html" class="sidebar-link">接口</a></li><li><a href="/yjm.github.io/notes/typescript/class.html" class="sidebar-link">类</a></li><li><a href="/yjm.github.io/notes/typescript/function.html" class="sidebar-link">函数</a></li><li><a href="/yjm.github.io/notes/typescript/generic.html" class="sidebar-link">泛型</a></li><li><a href="/yjm.github.io/notes/typescript/inference.html" class="sidebar-link">类型推断</a></li><li><a href="/yjm.github.io/notes/typescript/advance.html" class="sidebar-link">高级类型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>DOM</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/DOM/" class="active sidebar-link">DOM</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#浏览器渲染原理（webkit）" class="sidebar-link">浏览器渲染原理（webkit）</a></li><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#元素偏移量与客户区大小" class="sidebar-link">元素偏移量与客户区大小</a></li><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#滚动大小" class="sidebar-link">滚动大小</a></li><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#确定元素大小" class="sidebar-link">确定元素大小</a></li><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#svga-web端示例" class="sidebar-link">SVGA WEB端示例</a></li><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#dom事件类" class="sidebar-link">DOM事件类</a></li><li class="sidebar-sub-header"><a href="/yjm.github.io/notes/DOM/#盒模型" class="sidebar-link">盒模型</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>CSS</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/CSS/" class="sidebar-link">CSS开发笔记</a></li><li><a href="/yjm.github.io/notes/CSS/shapes/" class="sidebar-link">/notes/CSS/shapes/</a></li><li><a href="/yjm.github.io/notes/CSS/sass.html" class="sidebar-link">Dart-Sass</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>webpack</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/WEBPACK/" class="sidebar-link">webpack 性能优化</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>IOS问题库</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/IOS/" class="sidebar-link">ios 问题库</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>浏览器</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/window/" class="sidebar-link">Event Loop</a></li><li><a href="/yjm.github.io/notes/window/HTTP/" class="sidebar-link">HTTP协议</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>RegExp</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/REGEXP/" class="sidebar-link">正则表达式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>git</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/GIT/" class="sidebar-link">git 三种工作流程</a></li><li><a href="/yjm.github.io/notes/GIT/gitflow.html" class="sidebar-link">git-flow 的工作流程</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>其他</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/yjm.github.io/notes/OTHER/" class="sidebar-link">其他</a></li><li><a href="/yjm.github.io/notes/OTHER/NPM.html" class="sidebar-link">verdaccio 私有npm仓库搭建</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="dom"><a href="#dom" aria-hidden="true" class="header-anchor">#</a> DOM</h1> <h2 id="浏览器渲染原理（webkit）"><a href="#浏览器渲染原理（webkit）" aria-hidden="true" class="header-anchor">#</a> 浏览器渲染原理（webkit）</h2> <h3 id="渲染树"><a href="#渲染树" aria-hidden="true" class="header-anchor">#</a> 渲染树</h3> <h4 id="dom-2"><a href="#dom-2" aria-hidden="true" class="header-anchor">#</a> DOM</h4> <p>浏览器接收到HTML文件并转换为DOM树</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>DOM属于渲染引擎，JS属于JS引擎，当我们通过JS操作DOM时，其中涉及到两个线程之间的通信，必定会带来一些性能上的损耗，操作DOM可能会带来重绘回流的情况</p></div> <h4 id="cssom"><a href="#cssom" aria-hidden="true" class="header-anchor">#</a> CSSOM</h4> <p>浏览器接收到CSS文件并转换为CSSOM树，这个过程是<strong>很耗资源</strong>的。由于样式可以自行设置给某个节点，也可以通过<a href="">继承</a>获得，浏览器递归CSSOM树，确定具体的元素具体样式。</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>尽可能避免写过具体的css选择器（减少css层级），对于HTML尽量少的添加无意义的标签，保证<strong>层级扁平</strong></p></div> <h4 id="render-tree"><a href="#render-tree" aria-hidden="true" class="header-anchor">#</a> render tree</h4> <p><img src="/yjm.github.io/assets/img/img-render-tree.a6ed6452.png" alt="render tree"></p> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>在DOM树与CSSOM树合并过程中，display:none属性不会再渲染树中显示，形成渲染树后浏览器根据渲染树进行布局（回流），然后调用GPU绘制，合成图层，最后输出在屏幕上</p></div> <h3 id="重绘与回流"><a href="#重绘与回流" aria-hidden="true" class="header-anchor">#</a> 重绘与回流</h3> <h4 id="回流"><a href="#回流" aria-hidden="true" class="header-anchor">#</a> 回流</h4> <p>会导致回流的操作</p> <ul><li>页面首次渲染</li> <li>浏览器窗口大小发生改变</li> <li>元素尺寸或者位置改变</li> <li>元素内容变化（文字或者图片大小等等）</li> <li>元素字体大小变化</li> <li>添加或者删除可见的DOM元素</li> <li>激活css伪类（例如：hover）</li> <li>查询某些属性或调用某些方法</li></ul> <p>会导致回流的常用属性与方法</p> <ul><li>clientWidth、clientHeight、clientTop、clientLeft</li> <li>offsetWidth、offsetHeight、offsetTop、offsetLeft</li> <li>scrollWidth、scrollHeight、scrollTop、scrollLeft</li> <li>scrollIntoView()、scrollIntoViewIfNeeded()</li> <li>getComputedStyle()</li> <li>getBoundingClientRect()</li> <li>scrollTo()</li></ul> <div class="tip custom-block"><p class="custom-block-title">提示</p> <p>因为列队中可能会有影响这些属性或方法返回值的操作，即使获取的信息与列队中的操作引发的改变无关，浏览器也会强行清空列队来确保获取到最精确的值</p></div> <h4 id="重绘"><a href="#重绘" aria-hidden="true" class="header-anchor">#</a> 重绘</h4> <p>当元素样式的改变不影响他在文档流中的位置时（如color，visibility等），浏览器会将新样式赋予元素并重绘它</p> <h3 id="性能优化"><a href="#性能优化" aria-hidden="true" class="header-anchor">#</a> 性能优化</h3> <ul><li><p>回流会<code>必定</code>会引起重绘，重绘<code>不一定</code>会引发回流，回流成本比重绘高很多，改变父节点里的子节点很可能会导致父节点的一系列回流</p></li> <li><p>不要使用<code>table</code>布局，可能很小的改动会导致整改table的重新布局</p></li> <li><p>动画实现的速度的选择，动画速度越快，回流次数越多，也可以选择使用<code>requestAnimationFrame</code></p></li> <li><p>css选择符从<code>从右往左</code>匹配查询，避免节点层数级过多</p></li> <li><p>尽可能在<code>DOM</code>树的最末端改变<code>class</code></p></li> <li><p>使用<code>transform</code>代替<code>top</code></p></li> <li><p>使用<code>visibility</code>替换<code>display:none</code>，因为前者只会引起重绘，后者会引起回流</p></li> <li><p>避免频繁读取会引起回流的属性或引起会导致回流的方法，如果需要多次使用，可以用变量存储</p></li> <li><p>对具有复杂动画的元素使用position或者field，使它脱离文档流（脱离文档流后不会影响其他元素），否则会引起父元素及后继元素频繁回流</p></li> <li><p>避免使用css表达式（例：calc()）</p></li> <li><p>不要把节点属性值放在一个循环里当成循环里的变量</p></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i<span class="token operator">=</span><span class="token number">0</span><span class="token punctuation">;</span>i<span class="token operator">&lt;</span><span class="token number">1000</span><span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">//获取offsetTop会导致回流</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.testClass'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>style<span class="token punctuation">.</span>offsetTop<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>将频繁重绘或者回流的节点设置为图层，图层能够阻止该节点的渲染行为影响别的节点。例如video标签，浏览器会自动将该节点变为图层</li></ul> <p>设置节点为图层的常用方法：</p> <blockquote><ul><li>will-change</li> <li>video、iframe标签</li></ul></blockquote> <h4 id="例子：插入几万个dom，实现页面不卡顿"><a href="#例子：插入几万个dom，实现页面不卡顿" aria-hidden="true" class="header-anchor">#</a> 例子：插入几万个DOM，实现页面不卡顿</h4> <p>思路：可以分批渲染</p> <ol><li>虚拟滚动（进入可视区后才进行DOM渲染）</li> <li>通过requestAnimationFrame的方式去循环插入DOM</li> <li>分时函数</li></ol> <h2 id="元素偏移量与客户区大小"><a href="#元素偏移量与客户区大小" aria-hidden="true" class="header-anchor">#</a> 元素偏移量与客户区大小</h2> <h3 id="元素偏移量"><a href="#元素偏移量" aria-hidden="true" class="header-anchor">#</a> 元素偏移量</h3> <p>元素可见大小由：高度、宽度、内边距、滚动条、边框大小</p> <ul><li>offsetHeight：垂直方向上占用的空间大小，<code>高度+水平滚动条的宽度（可见的）+上下边框高度</code></li> <li>offsetWidth：水平方向上占用的空间大小，<code>宽度+垂直滚动条的宽度+左右边框宽度</code></li> <li>offsetTop：元素的<code>上外边框</code>到包含元素的<code>上内边框</code>之间的距离</li> <li>offsetLeft：元素的<code>左外边框</code>到包含元素的<code>左内边框</code>之间的距离</li></ul> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>1.以上大小不包括外边距<br>
2.offsetParent属性不一定与parentNode的值相等，例如<code>td</code>元素的<code>offsetParent</code>是作为其祖父元素的<code>table</code>元素，因为table是在DOM层次中距离td最近的一个<code>具有大小的元素</code></p></div> <h3 id="客户端大小"><a href="#客户端大小" aria-hidden="true" class="header-anchor">#</a> 客户端大小</h3> <p>指的是元素内容及其内边距所占据的空间大小</p> <ul><li>clientWidth：元素内容区宽度加上左右内边距宽度</li> <li>clientHeight：元素内容区高度加上上下内边距高度</li></ul> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>客户区大小就是元素内部的空间大小，因此滚动条占用的空间不计算在内</p></div> <p><img src="/yjm.github.io/assets/img/img-box.4aa5a9e3.png" alt="clientWidth"></p> <h3 id="获取元素的偏移量"><a href="#获取元素的偏移量" aria-hidden="true" class="header-anchor">#</a> 获取元素的偏移量</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 获取左偏移量</span>
<span class="token keyword">function</span> <span class="token function">getElementLeft</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> actualLeft <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
    <span class="token keyword">var</span> current <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        actualLeft <span class="token operator">+=</span> current<span class="token punctuation">.</span>offsetLeft<span class="token punctuation">;</span>
        current <span class="token operator">=</span> current<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> actualLeft<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// 获取上偏移量</span>
<span class="token keyword">function</span> <span class="token function">getElementTop</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> actualTop <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> current <span class="token operator">=</span> element<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token keyword">while</span> <span class="token punctuation">(</span>current <span class="token operator">!==</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        actualTop <span class="token operator">+=</span> current<span class="token punctuation">.</span> offsetTop<span class="token punctuation">;</span>
        current <span class="token operator">=</span> current<span class="token punctuation">.</span>offsetParent<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> actualTop<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p> <p>1.对于一般布局利用这两个函数利用offsetParent属性在DOM层次中逐级向上回溯，将每层次中的偏移量属性值合并到一块，可以得到非常精确的结果。但是对于<code>表格和内嵌框架布局</code>的页面，不同浏览器实现这些元素的方式不同，取得的值就不太精确了<br>
2.读取偏移量会导致DOM回流，如需重复使用其中的某些属性的值，可以将他们保存在局部变量中，来提高性能</p></div> <h3 id="读取浏览器视口大小"><a href="#读取浏览器视口大小" aria-hidden="true" class="header-anchor">#</a> 读取浏览器视口大小</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getViewport</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

   <span class="token keyword">var</span> pageWidth <span class="token operator">=</span> window<span class="token punctuation">.</span>innerWidth<span class="token punctuation">,</span>
    pageHeight <span class="token operator">=</span> window<span class="token punctuation">.</span>innerHeight<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> pageWidth <span class="token operator">!=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>document<span class="token punctuation">.</span>compatMode <span class="token operator">==</span> <span class="token string">&quot;CSS1Compat&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        pageWidth<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
        pageHeight<span class="token punctuation">:</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token punctuation">{</span>
        pageWidth<span class="token punctuation">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientWidth<span class="token punctuation">,</span>
        pageHeight<span class="token punctuation">:</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>clientHeight
      <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token punctuation">{</span>
      pageWidth<span class="token punctuation">,</span>
      pageHeight
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre></div><h2 id="滚动大小"><a href="#滚动大小" aria-hidden="true" class="header-anchor">#</a> 滚动大小</h2> <ul><li>scrollHeight:没有滚动条的情况下，元素内容的总高度</li> <li>scrollWidth:没有滚动条的情况下，元素内容的总宽度</li> <li>scrollTop:被隐藏在内容区域上方的像素数。通过设置这个属性可以改变元素的滚动位置</li> <li>scrollLeft:被隐藏在内容区域左方的像素数。通过设置这个属性可以改变元素的滚动位置</li></ul> <p><img src="/yjm.github.io/assets/img/img-size-scroll.6db4e391.png" alt="scroll"></p> <div class="tip custom-block"><p>scrollWidth 和 scrollHeight 主要用于确定元素内容的实际大小</p> <p>scrollLeft 和 scrollTop 设置为 0，就可以重置元素的滚动位置</p></div> <h3 id="获取文档尺寸"><a href="#获取文档尺寸" aria-hidden="true" class="header-anchor">#</a> 获取文档尺寸</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 确定文档的总大小</span>
<span class="token keyword">var</span> docHeight <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">,</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientHeight<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> docWidth <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">max</span><span class="token punctuation">(</span>document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollWidth<span class="token punctuation">,</span>
document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="回滚顶部"><a href="#回滚顶部" aria-hidden="true" class="header-anchor">#</a> 回滚顶部</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">scrollToTop</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>scrollTop <span class="token operator">!=</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        element<span class="token punctuation">.</span>scrollTop <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="确定元素大小"><a href="#确定元素大小" aria-hidden="true" class="header-anchor">#</a> 确定元素大小</h2> <p><code>getBoundingClientRect()</code> 方法包含 4 个属性： <code>left</code> 、 <code>top</code> 、 <code>right</code> 和 <code>bottom</code> 。这些属性给出了元素在页面中相对于视口的位置。IE8 及更早版本认为文档的左上角坐标是(2, 2)，而其他浏览器包括 IE9 则将传统的(0,0)作为起点坐标<br>
一般来说， <code>right</code> 和 <code>left</code> 的差值与 <code>offsetWidth</code> 的值相等，而 <code>bottom</code> 和 <code>top</code> 的差值与 <code>offsetHeight</code>相等。而且，<code>left</code> 和 <code>top</code> 属性大致等于 <code>getElementLeft()</code> 和 <code>getElementTop()</code> 函数取的值</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token parameter">element</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop<span class="token punctuation">;</span>
    <span class="token keyword">var</span> scrollLeft <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollLeft<span class="token punctuation">;</span>

    <span class="token keyword">if</span> <span class="token punctuation">(</span>element<span class="token punctuation">.</span>getBoundingClientRect<span class="token punctuation">)</span><span class="token punctuation">{</span>

        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset <span class="token operator">!=</span> <span class="token string">&quot;number&quot;</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

            <span class="token keyword">var</span> temp <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;div&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            temp<span class="token punctuation">.</span>style<span class="token punctuation">.</span>cssText <span class="token operator">=</span> <span class="token string">&quot;position:absolute;left:0;top:0;&quot;</span><span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset <span class="token operator">=</span> <span class="token operator">-</span>temp<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>top <span class="token operator">-</span> scrollTop<span class="token punctuation">;</span>
            document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">removeChild</span><span class="token punctuation">(</span>temp<span class="token punctuation">)</span><span class="token punctuation">;</span>
            temp <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token keyword">var</span> rect <span class="token operator">=</span> element<span class="token punctuation">.</span><span class="token function">getBoundingClientRect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> offset <span class="token operator">=</span> arguments<span class="token punctuation">.</span>callee<span class="token punctuation">.</span>offset<span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            left<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>left <span class="token operator">+</span> offset<span class="token punctuation">,</span>
            right<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>right <span class="token operator">+</span> offset<span class="token punctuation">,</span>
            top<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>top <span class="token operator">+</span> offset<span class="token punctuation">,</span>
            bottom<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>bottom <span class="token operator">+</span> offset
        <span class="token punctuation">}</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

        <span class="token keyword">var</span> actualLeft <span class="token operator">=</span> <span class="token function">getElementLeft</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> actualTop <span class="token operator">=</span> <span class="token function">getElementTop</span><span class="token punctuation">(</span>element<span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token punctuation">{</span>
            left<span class="token punctuation">:</span> actualLeft <span class="token operator">-</span> scrollLeft<span class="token punctuation">,</span>
            right<span class="token punctuation">:</span> actualLeft <span class="token operator">+</span> element<span class="token punctuation">.</span>offsetWidth <span class="token operator">-</span> scrollLeft<span class="token punctuation">,</span>
            top<span class="token punctuation">:</span> actualTop <span class="token operator">-</span> scrollTop<span class="token punctuation">,</span>
            bottom<span class="token punctuation">:</span> actualTop <span class="token operator">+</span> element<span class="token punctuation">.</span>offsetHeight <span class="token operator">-</span> scrollTop
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个函数返回的值可能会有所不同，例如使用表格布局或使用滚
动元素的情况下。</p> <div class="warning custom-block"><p class="custom-block-title">注意</p> <p>由于这里使用了 arguments.callee ，所以这个方法不能在严格模式下使用。</p></div> <h2 id="svga-web端示例"><a href="#svga-web端示例" aria-hidden="true" class="header-anchor">#</a> SVGA WEB端示例</h2> <p><a href="http://svga.io/intro.html" target="_blank" rel="noopener noreferrer">SVGA<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 是一种跨平台的开源动画格式，同时兼容 iOS / Android / Web。SVGA 除了使用简单，性能卓越，同时让动画开发分工明确，各自专注各自的领域，大大减少动画交互的沟通成本，提升开发效率。动画设计师专注动画设计，通过工具输出svga动画文件，提供给开发工程师在集成 svga player 之后直接使用。动画开发从未如此简单！</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>demoCanvas<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span><span class="token property">margin</span><span class="token punctuation">:</span> 0 auto</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>https://cdn.jsdelivr.net/npm/svgaplayerweb@2.3.0/build/svga.min.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
    <span class="token keyword">var</span> player <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SVGA<span class="token punctuation">.</span>Player</span><span class="token punctuation">(</span><span class="token string">'#demoCanvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> parser <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">SVGA<span class="token punctuation">.</span>Parser</span><span class="token punctuation">(</span><span class="token string">'#demoCanvas'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Must Provide same selector eg:#demoCanvas IF support IE6+</span>
    parser<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'./loading.svga'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">videoItem</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        player<span class="token punctuation">.</span><span class="token function">setVideoItem</span><span class="token punctuation">(</span>videoItem<span class="token punctuation">)</span><span class="token punctuation">;</span>
        player<span class="token punctuation">.</span><span class="token function">startAnimation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><h2 id="dom事件类"><a href="#dom事件类" aria-hidden="true" class="header-anchor">#</a> DOM事件类</h2> <h3 id="dom事件的级别"><a href="#dom事件的级别" aria-hidden="true" class="header-anchor">#</a> DOM事件的级别</h3> <ol><li>DOM0 element.onclick = function(){}<br></li> <li>DOM2 element.addEventListener(&quot;click&quot;,function(){},false)<br></li> <li>DOM3 element.addEventListener(&quot;keyup&quot;,function(){},false)</li></ol> <h3 id="dom事件模型"><a href="#dom事件模型" aria-hidden="true" class="header-anchor">#</a> DOM事件模型</h3> <p>捕获：从上到下<br>
冒泡：从下到上</p> <h3 id="dom事件流"><a href="#dom事件流" aria-hidden="true" class="header-anchor">#</a> DOM事件流</h3> <p>window对象=&gt;捕获=&gt;目标阶段=&gt;冒泡=&gt;window对象</p> <h3 id="dom事件捕获的具体流程"><a href="#dom事件捕获的具体流程" aria-hidden="true" class="header-anchor">#</a> DOM事件捕获的具体流程</h3> <p>window=&gt;document=&gt;html(document.documentElement)=&gt;body=&gt;...=&gt;目标元素</p> <h3 id="事件绑定"><a href="#事件绑定" aria-hidden="true" class="header-anchor">#</a> 事件绑定</h3> <p>element.addEventListener(&quot;click&quot;,function(){},false)（最后一个参数false表示冒泡阶段触发，true表示捕获阶段触发）</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>body</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ev<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
        目标元素
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
        <span class="token keyword">var</span> ev <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'ev'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/********************捕获阶段触发***************************/</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'document captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'html captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'body captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ev<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ev captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">/******************冒泡阶段触发**********************/</span>
        window<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'window captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'document captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
        document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'html captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        document<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'body captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        ev<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'ev captrue'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        
    </span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>body</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>触发顺序：<br>
window captrue <br>
document captrue<br>
html captrue<br>
body captrue<br>
ev captrue<br>
ev captrue<br>
body captrue<br>
html captrue<br>
document captrue<br>
window captrue</p> <h3 id="event对象的常见应用"><a href="#event对象的常见应用" aria-hidden="true" class="header-anchor">#</a> Event对象的常见应用</h3> <ol><li>event.preventDefault()（阻止默认行为）<br></li> <li>event.stopPropagation()（阻止冒泡）<br></li> <li>event.stoplmmediatePropagation()（事件响应优先级，在优先级高的事件中加入该函数，可以阻止优先级低的函数执行）<br></li> <li>event.currentTarget（当前所绑定的事件）<br></li> <li>event.target（当前被点击的元素）</li></ol> <h3 id="自定义事件"><a href="#自定义事件" aria-hidden="true" class="header-anchor">#</a> 自定义事件</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> eve <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Event</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ev<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">,</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'custome'</span><span class="token punctuation">)</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ev<span class="token punctuation">.</span><span class="token function">dispatchEvent</span><span class="token punctuation">(</span>eve<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>customEvent与Event都可以创建自定义事件，customEvent可以加数据</p> <h2 id="盒模型"><a href="#盒模型" aria-hidden="true" class="header-anchor">#</a> 盒模型</h2> <h3 id="标准盒模型-ie盒模型"><a href="#标准盒模型-ie盒模型" aria-hidden="true" class="header-anchor">#</a> 标准盒模型+IE盒模型</h3> <p>盒模型：content+padding+border+margin</p> <h3 id="标准盒模型和ie盒模型区别"><a href="#标准盒模型和ie盒模型区别" aria-hidden="true" class="header-anchor">#</a> 标准盒模型和IE盒模型区别</h3> <p>标准width/height计算只包括content<br>
IE的width/height计算包括content+padding+border</p> <h3 id="设置盒模型"><a href="#设置盒模型" aria-hidden="true" class="header-anchor">#</a> 设置盒模型</h3> <p>标准：box-sizing:content-box;<br>
IE：box-sizing:border-box;</p> <h3 id="js取得盒模型的宽高"><a href="#js取得盒模型的宽高" aria-hidden="true" class="header-anchor">#</a> js取得盒模型的宽高</h3> <p>1.dom.style.width/height（只适合内联元素的宽高）<br>
2.dom.currentStyle.width/height（获取渲染后的宽高，仅IE）<br>
3.window.getComputedStyle(dom).width/height（兼容性比2的更好）<br>
4.dom.getBoundingClientRect.width/height（计算绝对位置，获得四个元素top/left/width/height）</p> <h3 id="盒模型边距重叠问题（重叠原则是取最大值）"><a href="#盒模型边距重叠问题（重叠原则是取最大值）" aria-hidden="true" class="header-anchor">#</a> 盒模型边距重叠问题（重叠原则是取最大值）</h3> <h4 id="解决方法：bfc（块级元素格式化上下文）"><a href="#解决方法：bfc（块级元素格式化上下文）" aria-hidden="true" class="header-anchor">#</a> 解决方法：BFC（块级元素格式化上下文）</h4> <p>BFC原理：<br>
1.BFC元素垂直方向会有外边距重叠<br>
2.BFC不与浮动元素重叠（清浮动重要原理）<br>
3.BFC是独立容器，不影响其他元素也不受其他元素影响<br>
4.BFC子元素即使是浮动元素也会参加计算<br>
5.BFC计算高度时，浮动元素也会参与计算</p> <h4 id="创建bfc-受bfc原理2影响，bfc可以清浮动"><a href="#创建bfc-受bfc原理2影响，bfc可以清浮动" aria-hidden="true" class="header-anchor">#</a> 创建BFC(受BFC原理2影响，BFC可以清浮动)</h4> <p>1.overflow:auto/hidden<br>
2.float:left/right<br>
3.position:absolute/fixed</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">更新时间:</span> <span class="time">9/30/2019, 1:39:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/yjm.github.io/notes/typescript/advance.html" class="prev">高级类型</a></span> <span class="next"><a href="/yjm.github.io/notes/CSS/">CSS开发笔记</a>→
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/yjm.github.io/assets/js/app.16d43aae.js" defer></script><script src="/yjm.github.io/assets/js/2.dc0e93a8.js" defer></script><script src="/yjm.github.io/assets/js/5.4c6ec876.js" defer></script>
  </body>
</html>
